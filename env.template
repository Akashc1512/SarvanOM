# =============================================================================
# SarvanOM Universal Knowledge Platform - Environment Configuration
# =============================================================================
# 
# This template contains ALL required environment variables for the platform.
# Copy this file to .env and update with your actual values.
# 
# SECURITY WARNING: Never commit .env files to version control!
# Add .env to your .gitignore file.
#
# Architecture: Microservices with API Gateway, Search, Synthesis, Auth, Analytics
# =============================================================================

# =============================================================================
# CORE SYSTEM CONFIGURATION
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Service identification
SERVICE_NAME=sarvanom-api
VERSION=1.0.0

# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# API GATEWAY CONFIGURATION
# =============================================================================

# API Gateway settings
API_GATEWAY_HOST=0.0.0.0
API_GATEWAY_PORT=8000
API_GATEWAY_WORKERS=4

# CORS configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com
CORS_ALLOW_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_TOKENS_PER_MINUTE=10000
RATE_LIMIT_BURST_SIZE=10

# Security settings
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary database (PostgreSQL recommended for production)
DATABASE_URL=postgresql://username:password@localhost:5432/sarvanom_db

# Redis for caching and sessions
REDIS_URL=redis://localhost:6379/0
REDIS_ENABLED=true

# Vector database (Pinecone)
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=sarvanom-vectors

# Knowledge Graph (ArangoDB)
ARANGODB_URL=http://localhost:8529
ARANGODB_USERNAME=root
ARANGODB_PASSWORD=your-arangodb-password
ARANGODB_DATABASE=sarvanom_kg

# Search engine (MeiliSearch)
MEILISEARCH_URL=http://localhost:7700
MEILISEARCH_MASTER_KEY=your-meilisearch-master-key

# =============================================================================
# LLM PROVIDERS - ZERO BUDGET CONFIGURATION
# =============================================================================

# Ollama (Local - FREE)
OLLAMA_ENABLED=true
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b

# Hugging Face (API - FREE)
HUGGINGFACE_WRITE_TOKEN=your-huggingface-write-token
HUGGINGFACE_READ_TOKEN=your-huggingface-read-token
HUGGINGFACE_API_KEY=your-huggingface-legacy-api-key
HUGGINGFACE_MODEL=microsoft/DialoGPT-medium

# Model selection configuration
USE_DYNAMIC_SELECTION=true
PRIORITIZE_FREE_MODELS=true

# =============================================================================
# PAID LLM PROVIDERS (FALLBACK)
# =============================================================================

# OpenAI (Paid - Fallback)
OPENAI_API_KEY=your-openai-api-key
OPENAI_LLM_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Anthropic (Paid - Fallback)
ANTHROPIC_API_KEY=your-anthropic-api-key
ANTHROPIC_MODEL=claude-3-haiku-20240307

# Azure OpenAI (Paid - Fallback)
AZURE_OPENAI_API_KEY=your-azure-api-key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT_NAME=your-deployment-name

# Google (Paid - Fallback)
GOOGLE_API_KEY=your-google-api-key
GOOGLE_MODEL=gemini-pro

# =============================================================================
# MICROSERVICES CONFIGURATION
# =============================================================================

# Auth Service
AUTH_SERVICE_URL=http://localhost:8001
AUTH_SERVICE_SECRET=your-auth-service-secret

# Search Service
SEARCH_SERVICE_URL=http://localhost:8002
SEARCH_SERVICE_SECRET=your-search-service-secret

# Synthesis Service
SYNTHESIS_SERVICE_URL=http://localhost:8003
SYNTHESIS_SERVICE_SECRET=your-synthesis-service-secret

# Fact-check Service
FACTCHECK_SERVICE_URL=http://localhost:8004
FACTCHECK_SERVICE_SECRET=your-factcheck-service-secret

# Analytics Service
ANALYTICS_SERVICE_URL=http://localhost:8005
ANALYTICS_SERVICE_SECRET=your-analytics-service-secret

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================

# Agent timeout and retry settings
AGENT_TIMEOUT_SECONDS=30
AGENT_MAX_RETRIES=3
AGENT_BACKOFF_FACTOR=2

# Query processing
QUERY_CACHE_TTL_SECONDS=3600
QUERY_MAX_LENGTH=2000
QUERY_MIN_CONFIDENCE=0.7

# Knowledge Graph Agent
KG_AGENT_ENABLED=true
KG_AGENT_TIMEOUT=30
KG_MAX_RELATIONSHIP_DEPTH=3

# =============================================================================
# MONITORING & ANALYTICS
# =============================================================================

# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Health check settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# Analytics tracking
ANALYTICS_ENABLED=true
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL=60

# =============================================================================
# SECURITY & COMPLIANCE
# =============================================================================

# Security headers
SECURITY_HEADERS_ENABLED=true
CONTENT_SECURITY_POLICY=default-src 'self'

# Input validation
MAX_REQUEST_SIZE=10485760  # 10MB
MAX_QUERY_LENGTH=2000

# Rate limiting per user
USER_RATE_LIMIT_REQUESTS_PER_MINUTE=30
USER_RATE_LIMIT_TOKENS_PER_MINUTE=5000

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Development settings
DEBUG=false
RELOAD=false
TESTING=false

# Test database
TEST_DATABASE_URL=sqlite:///test.db
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Docker settings
DOCKER_ENABLED=false
DOCKER_NETWORK=sarvanom-network

# Kubernetes settings
KUBERNETES_ENABLED=false
KUBERNETES_NAMESPACE=sarvanom

# Load balancer
LOAD_BALANCER_ENABLED=false
LOAD_BALANCER_ALGORITHM=round_robin

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Email service (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true

# File storage
STORAGE_TYPE=local  # local, s3, gcs
STORAGE_BUCKET=sarvanom-uploads
STORAGE_REGION=us-west-1

# AWS S3 (if using S3 storage)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-west-1

# =============================================================================
# WEBHOOKS & INTEGRATIONS
# =============================================================================

# Slack notifications
SLACK_WEBHOOK_URL=your-slack-webhook-url
SLACK_CHANNEL=#sarvanom-alerts

# Discord notifications
DISCORD_WEBHOOK_URL=your-discord-webhook-url

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Cache settings
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000

# Session settings
SESSION_SECRET=your-session-secret
SESSION_TTL_SECONDS=86400

# API versioning
API_VERSION=v1
API_DEPRECATION_WARNING_DAYS=30

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
FEATURE_EXPERT_REVIEW=true
FEATURE_REAL_TIME_COLLABORATION=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_MULTI_TENANT=false
FEATURE_SSO=false

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Connection pooling
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# Worker processes
WORKER_PROCESSES=4
WORKER_THREADS=2

# Memory limits
MAX_MEMORY_USAGE_MB=2048
GARBAGE_COLLECTION_INTERVAL=300

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30

# Recovery settings
RECOVERY_MODE=false
RECOVERY_POINT_RETENTION_DAYS=7

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=365

# Data retention
DATA_RETENTION_DAYS=2555  # 7 years
ANONYMIZE_OLD_DATA=true

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
#
# Remember to:
# 1. Copy this file to .env
# 2. Update all placeholder values with your actual credentials
# 3. Never commit .env files to version control
# 4. Use different values for development, staging, and production
# 5. Rotate secrets regularly
# 6. Monitor for security vulnerabilities
#
# For production deployment:
# - Use strong, unique secrets
# - Enable all security features
# - Configure proper monitoring
# - Set up automated backups
# - Implement proper logging
# =============================================================================
